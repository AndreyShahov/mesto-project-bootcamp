(()=>{"use strict";var e=document.querySelector(".profile__edit-button"),t=document.querySelector(".profile__add-button"),n=document.querySelector(".popup_type_edit"),r=document.querySelector(".popup_type_image"),o=document.querySelector(".popup_type_add-card"),i=document.querySelector(".profile__author"),a=document.querySelector(".profile__author-subline"),c=document.querySelector(".elements"),u=document.querySelector(".popup__bigImage"),s=document.forms.edit,d=document.forms.add,l=s.elements.userName,p=s.elements.about,m=d.elements.cardName,v=d.elements.link,y=Array.from(document.querySelectorAll(".popup")),f=o.querySelector(".popup__save-btn");function _(e,t){t?(e.setAttribute("disabled",!0),e.classList.add("popup__save-btn_disabled")):(e.removeAttribute("disabled"),e.classList.remove("popup__save-btn_disabled"))}function k(e,t){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?_(t,!1):_(t,!0)}function b(e){e.classList.add("popup_opened"),document.addEventListener("keydown",q)}function S(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",q)}function h(e,t){var n=function(e){var t=document.querySelector("#element").content.querySelector(".element").cloneNode(!0),n=t.querySelector(".element__image");return n.src=e.link,n.alt=e.name,t.querySelector(".element__title").textContent=e.name,n.addEventListener("click",(function(){u.src=e.link,u.alt=e.name,document.querySelector(".popup__caption").textContent=e.name,b(r)})),t}(e);t.prepend(n)}function q(e){"Escape"===e.key&&y.forEach((function(e){S(e)}))}Array.from(document.forms).forEach((function(e){return t=e,n=Array.from(t.querySelectorAll(".popup__input")),r=t.querySelector(".popup__save-btn"),k(n,r),void n.forEach((function(e){e.addEventListener("input",(function(){var t,o;o=(t=e).parentNode.querySelector("#".concat(t.id,"-error")),function(e){return e.setCustomValidity(""),e.validity.valueMissing?(e.setCustomValidity("Вы пропустили это поле."),!1):e.validity.tooShort||e.validity.tooLong?(e.setCustomValidity("Должно быть от 2 до 30 символов."),!1):e.validity.typeMismatch&&"url"===e.type?(e.setCustomValidity("Введите адрес сайта."),!1):void e.reportValidity()}(t)||(o.textContent=t.validationMessage),k(n,r)}))}));var t,n,r})),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){h(e,c)})),e.addEventListener("click",(function(){return b(n)})),t.addEventListener("click",(function(){return b(o)})),s.addEventListener("submit",(function(e){e.preventDefault(),i.textContent=l.value,a.textContent=p.value,S(n)})),d.addEventListener("submit",(function(e){e.preventDefault();var t={};t.name=m.value,t.link=v.value,h(t,c),S(o),d.reset(),_(f,!0)})),c.addEventListener("click",(function(e){e.target.classList.contains("element__like-btn")&&e.target.classList.toggle("element__like-btn_active")})),c.addEventListener("click",(function(e){e.target.classList.contains("element__trash-btn")&&e.target.parentElement.parentElement.remove()})),y.forEach((function(e){e.querySelector(".popup__overlay").addEventListener("click",(function(){return S(e)}))})),y.forEach((function(e){e.querySelector(".popup__close-btn").addEventListener("click",(function(){return S(e)}))}))})();